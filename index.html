<!DOCTYPE html>
<html>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <link rel="icon" type="image/png" href="public/image/sdark.png" />
    <meta name=" description" content="موقع به ساعة ايقاف و مؤقت">

    <title>ساعه ايقاف | المؤقت </title>

    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/css?family=Cairo|Harmattan|Tajawal" rel="stylesheet">

    <link rel="stylesheet" type="text/css" href="public/css/switcher.css">
    <link rel="stylesheet" type="text/css" href="public/css/flag-icon.min.css">
    <link rel="stylesheet" type="text/css" href="public/css/main89a0.css?v=1588986795">

    <link rel="stylesheet" type="text/css" href="public/css/styles.css">

</head>

<body>

    <!--first container-->

    <div class="container" style="margin-top: 1%;">
        <div class="row">

            <div id="myTimer" class="col-6 col-sm-1 timer" style="margin-bottom: 1%;">
                <a href="timer.html">
                <img width="35px" height="35px" src="public/image/timer-clock.png"></a>
                <p>المؤقت</p>
            </div>




            <div id="myStop" class="col-6 col-sm-1  stop" style="margin-bottom: 1%;">
                <a href="index.html"><img width="35px" height="35px" src="public/image/stopwatch.png"></a>
                <p>ساعة الايقاف</p>
            </div>

            <span id="dot" class="dot"></span>



            <div class="col-12 col-sm-9 moodLang">

                <button class="btn  border-0  " type="button" style="background: transparent;z-index:1">
                        <a href="#" class="d-block"> 
                           <span id="myLang" class="lang">
                               الانجليزية
                           </span>
                       </a>
               <span class="caret" style="color: rgb(237, 122, 125)"></span>
           </button>
                <span id="myMood" class="mood">
                        الوضع الليلي
                        <a><input class="form-check-input" type="checkbox" id="inlineCheckbox1" value="option1" style="opacity: 0">
                        </a>
                    </span>
            </div>


            <div id="logoText" class="col-12 col-sm-12 text-center logoText">

                <a href="index.html">
                    <img src="public/image/swhite.png" style="width: 90px;height: 90px;display: inline-block;" id="site-logo">
                </a>
                <br>
                <h3 style="font-weight: bolder;">ساعة الايقاف</h3>
                <h6>StopWatch</h6>

            </div>
        </div>
    </div>

    <!--second container-->

    <div class="container" style="padding: 0px;">
        <div class="row">
            <div id="stopwatchBox" class="col-12 col-md-7">

                <div class="time col-12">
                    <span id="second">ثانية</span>
                    <span id="minute">دقيقة</span>
                    <span id="hour">ساعة</span>
                </div>

                <div id="myStopwatch" class="stopwatch col-12"></div>

                <div class="tools col-12" style="margin-top: 5%;">
                    <a id="start" class="start" class="button" onClick="stopwatch.start();">بدء</a>
                    <a id="lap" class="lap" class="button" onClick="stopwatch.lap();" style="border-radius: 30px;
                    padding: 20px 10px;color: rgb(216, 234, 239);border-radius: 45px;background-color: rgb(168, 208, 220);">تقسيم</a>
                    <a id="repeat" class="repeat" class="button" onClick="stopwatch.restart();">إعادة</a>
                </div>


                <!--   <a href="#" class="button" onClick="stopwatch.stop();">Stop</a>
            <a href="#" class="button" onClick="stopwatch.clear();">Clear Laps</a>-->

            </div>
            <div class="col-12 col-md-5">

                <p id="resText" class="resText">النتائج</p>


                <ol id="myResults" class="results">

                </ol>

                <button id="csv" class="csv" onclick="exportTableToCSV('results.csv')">حفظ كا csv</button>

            </div>

        </div>
    </div>







    <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>
    <script type="text/javascript" src="public/js/jquery.switcher.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/typed.js@2.0.9"></script>




    <script>
        $(function() {
            $.switcher();
        });

        $('#inlineCheckbox1').change(function() {

            if ($(this).is(':checked')) {


                $('#site-logo').attr('src', 'public/image/sdark.png');
                $('html').get(0).style.setProperty('--main-color', '#242448');
                $('html').get(0).style.setProperty('--main-bg-color', '#171734');
                $('html').get(0).style.setProperty('--main-color', '#242448');
                $('html').get(0).style.setProperty('--second-bg-color', '#b3b3b3');
                $('html').get(0).style.setProperty('--golden-color', '#2289ff');
                $('html').get(0).style.setProperty('--right-graident-color', '#0d7dff');
                $('html').get(0).style.setProperty('--left-graident-color', '#33ccff');
                $('html').get(0).style.setProperty('--main-font-color', '#fff');
                $('html').get(0).style.setProperty('--second-font-color', '#fff');
                $('html').get(0).style.setProperty('--third-font-color', '#cecece');
                $('html').get(0).style.setProperty('--color', '#fff');
                $('html').get(0).style.setProperty('--inverse-color', '#fff');
                $('html').get(0).style.setProperty('--box-shadow-color', 'transparent');
                $('head').append('<style> ol>li:nth-child(odd):before {color: rgb(228, 230, 142);background-color: rgb(202, 204, 24);} li:nth-child(odd) span {color: white;}ol>li:nth-child(even):before {color: black;background-color: rgb(233, 232, 232);} li:nth-child(even) span {color: rgb(202, 204, 24);}</style>');


                var body = document.getElementsByTagName("BODY")[0];
                var stopwatch = document.getElementById("myStopwatch");
                var stopwatchBox = document.getElementById("stopwatchBox");
                var myResults = document.getElementById("myResults");
                var myLang = document.getElementById("myLang");
                var myMood = document.getElementById("myMood");
                var myTimer = document.getElementById("myTimer");
                var myStop = document.getElementById("myStop");
                var resText = document.getElementById("resText");
                var logoText = document.getElementById("logoText");
                var second = document.getElementById("second");
                var minute = document.getElementById("minute");
                var hour = document.getElementById("hour");
                var start = document.getElementById("start");
                var lap = document.getElementById("lap");
                var repeat = document.getElementById("repeat");
                var csv = document.getElementById("csv");
                var dot = document.getElementById("dot");


                body.style.backgroundColor = "rgb(30, 52, 82)"
                stopwatch.style.color = "white";
                stopwatchBox.style.backgroundColor = "rgb(32, 61, 90)";
                myResults.style.backgroundColor = "rgb(36, 75, 102)";
                myLang.style.color = "rgb(188, 202, 212)";
                myLang.style.backgroundColor = "rgb(36, 75, 102)";
                myMood.style.color = "rgb(188, 202, 212)";
                myMood.style.backgroundColor = "rgb(36, 75, 102)";
                myTimer.style.backgroundColor = "rgb(36, 75, 102)";
                myStop.style.backgroundColor = "rgb(36, 75, 102)";
                resText.style.backgroundColor = "rgb(36, 75, 102)";
                logoText.style.color = "rgb(248, 248, 249)";
                second.style.color = "rgb(171, 196, 81)";
                minute.style.color = "rgb(171, 196, 81)";
                hour.style.color = "rgb(171, 196, 81)";
                start.style.color = "rgb(171, 196, 81)";
                lap.style.backgroundColor = "rgb(171, 196, 81)";
                lap.style.color = "rgb(216, 234, 239)";
                repeat.style.color = "rgb(171, 196, 81)";
                csv.style.backgroundColor = "rgb(45, 83, 109)";
                csv.style.color = "rgb(163, 181, 190)";
                dot.style.backgroundColor = "rgb(49, 70, 88)";













                $.ajax({
                    method: "get",
                    url: "/update_mode",
                    data: {
                        mode: 'night'
                    }
                }).done(function(msg) {});
            } else {

                $('#site-logo').attr('src', 'public/image/swhite.png');
                $('html').get(0).style.setProperty('--main-color', '#242448');
                $('html').get(0).style.setProperty('--main-bg-color', '#f5f7fb');
                $('html').get(0).style.setProperty('--main-color', '#fff');
                $('html').get(0).style.setProperty('--second-bg-color', '#b3b3b3');
                $('html').get(0).style.setProperty('--golden-color', '#2289ff');
                $('html').get(0).style.setProperty('--right-graident-color', '#0d7dff');
                $('html').get(0).style.setProperty('--left-graident-color', '#33ccff');
                $('html').get(0).style.setProperty('--main-font-color', '#4d4d4d');
                $('html').get(0).style.setProperty('--second-font-color', '#8e8e8f');
                $('html').get(0).style.setProperty('--third-font-color', '#cecece');
                $('html').get(0).style.setProperty('--color', '#fff');
                $('html').get(0).style.setProperty('--inverse-color', 'var(--second-font-color)');
                $('html').get(0).style.setProperty('--box-shadow-color', '#bec5d2');
                $('head').append('<style> ol>li:nth-child(odd):before {color: rgb(238, 104, 135);background-color: rgb(233, 232, 232);} li:nth-child(odd) span {color: rgb(238, 104, 135);}ol>li:nth-child(even):before {color: color: rgb(212, 232, 238);background-color: rgb(168, 208, 220);} li:nth-child(even) span {color: rgb(130, 178, 207);}</style>');



                var body = document.getElementsByTagName("BODY")[0];
                var stopwatch = document.getElementById("myStopwatch");
                var stopwatchBox = document.getElementById("stopwatchBox");
                var myResults = document.getElementById("myResults");
                var myLang = document.getElementById("myLang");
                var myMood = document.getElementById("myMood");
                var myTimer = document.getElementById("myTimer");
                var myStop = document.getElementById("myStop");
                var resText = document.getElementById("resText");
                var logoText = document.getElementById("logoText");
                var second = document.getElementById("second");
                var minute = document.getElementById("minute");
                var hour = document.getElementById("hour");
                var start = document.getElementById("start");
                var lap = document.getElementById("lap");
                var repeat = document.getElementById("repeat");
                var csv = document.getElementById("csv");
                var dot = document.getElementById("dot");







                body.style.backgroundColor = "rgb(255, 255, 255)"
                stopwatch.style.color = "rgb(226, 71, 75)";
                stopwatchBox.style.backgroundColor = "rgb(247, 252, 255)";
                myResults.style.backgroundColor = "rgb(247, 252, 255)";
                myLang.style.color = "rgb(237, 122, 125)";
                myLang.style.backgroundColor = "rgb(252, 252, 252)";
                myMood.style.color = "rgb(237, 122, 125)";
                myMood.style.backgroundColor = "rgb(252, 252, 252)";
                myTimer.style.backgroundColor = "rgb(253, 250, 250)";
                myStop.style.backgroundColor = "rgb(253, 250, 250)";
                resText.style.backgroundColor = "rgb(247, 252, 255)";
                logoText.style.color = "rgb(237, 122, 125)";
                second.style.color = "rgb(130, 178, 207)";
                minute.style.color = "rgb(130, 178, 207)";
                hour.style.color = "rgb(130, 178, 207)";
                start.style.color = "rgb(130, 178, 207)";
                lap.style.backgroundColor = "rgb(130, 178, 207)";
                lap.style.color = "rgb(216, 234, 239)";
                repeat.style.color = "rgb(130, 178, 207)";
                csv.style.backgroundColor = "rgb(237, 251, 255)";
                csv.style.color = "rgb(238, 104, 135)";
                dot.style.backgroundColor = "rgb(245, 245, 247)";





                $.ajax({
                    method: "get",
                    url: "/update_mode",
                    data: {
                        mode: 'day'
                    }
                }).done(function(msg) {});
            }
        });
    </script>


    <script>
        class Stopwatch {
            constructor(display, results) {
                this.running = false;
                this.display = display;
                this.results = results;
                this.laps = [];
                this.reset();
                this.print(this.times);
            }

            reset() {
                this.times = [0, 0, 0, 0];
            }

            start() {
                if (!this.time) this.time = performance.now();
                if (!this.running) {
                    this.running = true;
                    requestAnimationFrame(this.step.bind(this));
                }
            }

            lap() {


                var today = new Date();
                var dd = today.getDate();
                var mm = today.getMonth() + 1;
                var yyyy = today.getFullYear();
                if (dd < 10) {
                    dd = '0' + dd;
                }
                if (mm < 10) {
                    mm = '0' + mm;
                }
                today = mm + '/' + dd + '/' + yyyy;

                var hoursNow = new Date().toLocaleTimeString('en-US', {
                    hour12: false,
                    hour: "numeric",
                    minute: "numeric"
                });



                let times = this.times;
                let li = document.createElement('li');
                let div1 = document.createElement('div');
                let div2 = document.createElement('div');


                li.style.textAlign = "right";
                li.style.padding = "2%";



                div1.style.width = "50%";
                div2.style.width = "30%";

                div1.style.float = "left";
                div2.style.float = "left";

                div1.style.textAlign = "center";
                div1.style.margin = "0px";




                li.append(div1, div2);



                div1.innerHTML = "<span>" + hoursNow + "</span><br>" + "<span>" + today + "</span>";
                div2.innerHTML = "<span>" + this.format(times) + "</span>";


                this.results.appendChild(li);

                var liCount = $('ol.results > li').length;

                console.log(liCount)

                if (liCount > 9) {
                    for (let i = 10; i <= liCount; i++) {

                        $('head').append('<style>  ol>li:nth-child(' + i + '):before {content: "" counter(my-awesome-counter);}</style>');

                    }

                }

            }

            stop() {
                this.running = false;
                this.time = null;
            }

            restart() {
                if (!this.time) this.time = performance.now();
                if (!this.running) {
                    this.running = true;
                    requestAnimationFrame(this.step.bind(this));
                }
                this.reset();
            }

            clear() {
                clearChildren(this.results);
            }

            step(timestamp) {
                if (!this.running) return;
                this.calculate(timestamp);
                this.time = timestamp;
                this.print();
                requestAnimationFrame(this.step.bind(this));
            }

            calculate(timestamp) {
                var diff = timestamp - this.time;
                // Hundredths of a second are 100 ms

                this.times[3] += diff / 10;


                // Seconds are 100 hundredths of a second
                if (Math.floor(this.times[3]) >= 100) {
                    this.times[2] += 1;
                    this.times[3] -= 100;
                }
                // Minutes are 60 seconds
                if (this.times[2] >= 60) {
                    this.times[1] += 1;
                    this.times[2] -= 60;
                }

                // hours are 60 minutes
                if (this.times[1] >= 60) {
                    this.times[0] += 1;
                }

            }

            print() {

                var hoursVal = String(Math.floor(this.times[3])).padStart(2, "0");
                var minutesVal = String(this.times[2]).padStart(2, "0");
                var secondsVal = String(this.times[1]).padStart(2, "0");
                var milsecondsVal = String(this.times[0]).padStart(2, "0");

                document.getElementById('myStopwatch').innerHTML = minutesVal + '<span>' + hoursVal + '</span>' + " " + " : " + secondsVal + " : " + milsecondsVal;

            }

            format(times) {
                var hoursVal = String(times[0]).padStart(2, "0");
                var minutesVal = String(times[1]).padStart(2, "0");
                var secondsVal = String(times[2]).padStart(2, "0");
                //console.log(hoursVal + ":" + minutesVal + ":" + secondsVal + ":" + milsecondsVal);
                return secondsVal + " : " + minutesVal + " : " + hoursVal;


            }
        }

        function pad0(value, count) {
            var result = value.toString();
            for (; result.length < count; --count)
                result = '0' + result;
            return result;
        }

        function clearChildren(node) {
            while (node.lastChild)
                node.removeChild(node.lastChild);
        }

        let stopwatch = new Stopwatch(
            document.querySelector('.stopwatch'),
            document.querySelector('.results'));
    </script>

    <script>
        function downloadCSV(csv, filename) {
            var csvFile;
            var downloadLink;

            // CSV file
            csvFile = new Blob([csv], {
                type: "text/csv"
            });

            // Download link
            downloadLink = document.createElement("a");

            // File name
            downloadLink.download = filename;

            // Create a link to the file
            downloadLink.href = window.URL.createObjectURL(csvFile);

            // Hide download link
            downloadLink.style.display = "none";

            // Add the link to DOM
            document.body.appendChild(downloadLink);

            // Click download link
            downloadLink.click();
        }

        function exportTableToCSV(filename) {
            var csv = [];
            var rows = document.querySelectorAll("ul li");

            for (var i = 0; i < rows.length; i++) {
                var row = [],
                    cols = rows[i].querySelectorAll("li span");

                for (var j = 0; j < cols.length; j++)
                    row.push(cols[j].innerText);

                csv.push(row.join(","));
            }

            // Download CSV file
            downloadCSV(csv.join("\n"), filename);
        }
    </script>



</body>



</html>